{% extends "base.html" %}
{% load static %}
{% load custom_tags %}
{% block content %}
    <div class="page-wraper">
        <!-- 상단 제목부분 -->
        <div class="page-content bg-white">
            <!----------============= 상단 제목 시작 ================----------->
            <!--제목을 감싸는 배경-->
            <div class="dlab-bnr-inr dlab-bnr-inr-sm overlay-black-middle"
                 style=" background-image: url('{% static 'images/board_name_img.jpg' %}'); height: 350px">
                <!-- 상단 제목을 클릭하면, 강의룸 메인 페이지로 이동 -->
                <!-- (ex. 강의룸 내 출결확인 페이지에서 상단 제목을 클릭하면, 강의룸 메인으로 돌아갈 수 있음) -->
                <a href="#">
                    <div class="container clearfix">
                        <div class="dlab-bnr-inr-entry">
                            <!-- 제목 -->
                            <!-- DB에서 제목 꺼내와야 함 -->
                            <h1 class="text-white introduce-letter-spacing_5">{{ lect.lect_title }}</h1>
                            <!--부제목-->
                            <!-- DB에서 제목 꺼내와야 함 (강의 간단소개 db 가져오면 됨) -->
                            <p class="introduce-margin-top_20">{{ lect.lect_intro }}</p>
                        </div>
                    </div>
                </a>
            </div>
            <!--==========================================================================================-->
            <!--======================================= 본문 시작 ==========================================-->
            <div class="content-block">
                <div class="section-full content-inner bg-white">
                    <div class="container">
                        <div class="row">
                            <!--========== 왼쪽 검색창 및 강의룸 네비게이션바 시작 ==========-->
                            <div class="col-lg-3 col-xl-3">
                                <div class="sticky-top">
                                    <!-- 강의룸 내 검색창 -->
                                    <!-- 검색 시, 강의룸 내 게시글들(공지사항, 강의목록, 과제 등) 중 해당 키워드를 포함한 게시글을 모두 끌고옴 -->
                                    <div class="listing-filter-sidebar" style="margin-bottom: 30px">
                                        <div style="margin-bottom: 20px">
                                            <h4 class="title">강의실 내 검색</h4>
                                            <div class="">
                                                <form role="search" method="post">
                                                    <div class="input-group">
                                                        <input name="text" type="text" class="form-control"
                                                               placeholder="검색어를 입력하세요.">
                                                        <span class="input-group-btn">
												<button type="submit" class="site-button"><i
                                                        class="fa fa-search"></i></button></span>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- 강의룸 내 페이지 리스트 -->
                                    <!-- 클릭한 게시글을 끌고옴 -->
                                    <div class="listing-filter-sidebar">
                                        <h4 class="title">강의실</h4>
                                        <div class="widget_tag">
                                            <ul class="m-b0">
                                                <!-- [메뉴바 > 강의실 > 강의] 게시판 내 강의소개 페이지로 이동 -->
                                                <li><a href="{% url "lect_detail" lect.lect_no %}">강의소개</a>&nbsp;</li>
                                                <!-- 공지사항, 강의, 과제, 제출된 과제 페이지들은 모두 동일한 레이아웃임 -->
                                                <!-- 다만 과제 페이지의 경우 강의자, 수강생 별 보이는 게 다르게끔 세션처리 필요 (해당 게시판 주석 참조) -->
                                                <!-- 강의자, 수강생 모두 모이는 메뉴: 공지사항, 강의, 과제 -->
                                                <li><a href="javascript:void(0);">공지사항</a>&nbsp;</li>
                                                <li><a href="javascript:void(0);">강의</a>&nbsp;</li>
                                                <li><a href="javascript:void(0);">과제</a>&nbsp;</li>
                                                <!-- 수강생만 보이는 메뉴: 출석 및 과제 현황 -->
                                                <li><a href="javascript:void(0);">출석 및 과제 현황</a>&nbsp;</li>
                                                <!-- 강의자만 보이는 메뉴: 출석 및 과제 관리, 수강생 관리, 제출된 과제 리스트 -->
                                                <li><a href="javascript:void(0);">출석 및 과제 관리</a>&nbsp;</li>
                                                <li><a href="javascript:void(0);">수강생 관리</a>&nbsp;</li>
                                                <li><a href="javascript:void(0);">제출된 과제 리스트</a>&nbsp;</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--========== 왼쪽 검색창 및 강의룸 네비게이션바 끝 ==========-->
                            <!--========== 오른쪽 강의룸 메인 콘텐츠 시작 ===========-->
                            <!-- 각 박스 별로 최신글 3개만 보이게끔 처리필요 -->
                            <div class="col-lg-10 col-xl-8 p-b30">
                                <div class="row">
                                    <div class="col-xl-12">
                                        <!-- 강의룸 공지사항 글을 담는 박스 -->
                                        <div class="content-box">
                                            <!-- 박스 제목 div -->
                                            <div class="content-header d-flex justify-content-between">
                                                <h3 class="title"><i class="fa fa-microphone m-r5"></i>공지사항</h3>
                                                {% if notice_list %}
                                                    <!-- 더보기 a태크 클릭 시, 강의룸 내 공지사항 페이지로 이동 -->
                                                    <a href="#">더보기</a>
                                                {% elif logined_user == lect.lect_chief %}
                                                    <a href="#">등록하기</a>
                                                {% endif %}

                                            </div>
                                            <div class="content-body">
                                                <!-- 공지사항 게시글 테이블 -->
                                                {% if notice_list %}
                                                <table class="table">
                                                    <!-- 테이블 1행: 제목 -->
                                                    <thead>
                                                    <tr>
                                                        <th class="border-top-0" scope="col">번호</th>
                                                        <th class="border-top-0" style="width: 400px" scope="col">제목
                                                        </th>
                                                        <th class="border-top-0" scope="col">작성자</th>
                                                        <th class="border-top-0" scope="col">작성일</th>
                                                    </tr>
                                                    </thead>
                                                    <!-- 테이블 2행 ~: 공지사항 최근 3개 게시글 불러옴 -->
                                                    <tbody>
                                                    {% for notice in notice_list %}
                                                        <tr>
                                                            <!-- 공지사항 번호 (고정됨) -->
                                                            <td>{{ forloop.counter }}</td>
                                                            <!-- 공지사항 제목-->
                                                            <td><a href="#">{{ notice.title }}</a></td>
                                                            <!-- 공지사항 작성자: 복수 강의자일 경우, 해당 게시글을 올린 강의자 이름을 불러올 것 -->
                                                            <td>{{ notice.writer }}</td>
                                                            <!-- 게시글 작성일 -->
                                                            <td>{{ notice.created }}</td>
                                                        </tr>
                                                    {% endfor %}
                                                    </tbody>
                                                </table>
                                            {% else %}
                                                <p>공지사항이 없습니다.</p>
                                            {% endif %}
                                            </div>
                                        </div>
                                        <!-- 강의룸 내 강의 페이지 글을 담는 박스 -->
                                        <div class="content-box">
                                            <!-- 박스 제목 div -->
                                            <div class="content-header d-flex justify-content-between">
                                                <h3 class="title"><i class="fa fa-book m-r5"></i>강의목록</h3>
                                                {% if lect_board_list %}
                                                    <!-- 더보기 a태크 클릭 시, 강의룸 내 강의리스트 페이지로 이동 -->
                                                    <a href="#">더보기</a>
                                                {% elif logined_user == lect.lect_chief %}
                                                    <a href={% url "lect_board_register" lect.lect_no %}>등록하기</a>
                                                {% endif %}
                                            </div>
                                            <div class="content-body">
                                            {% if lect_board_list %}
                                                <!-- 강의목록(강의페이지) 게시글 테이블 -->
                                                <table class="table">
                                                    <!-- 테이블 1행: 제목 -->
                                                    <thead>
                                                    <tr>
                                                        <th class="border-top-0" scope="col">번호</th>
                                                        <th class="border-top-0" style="width: 400px" scope="col">제목
                                                        </th>
                                                        <th class="border-top-0" scope="col">강의</th>
                                                        <th class="border-top-0" scope="col">작성일</th>
                                                    </tr>
                                                    </thead>
                                                    <!-- 테이블 2행 ~: 강의목록(강의) 페이지 내 최근 3개 게시글 불러옴 -->
                                                    <tbody>
                                                    {% for board in lect_board_list|slice:':3' %}
                                                        <tr>
                                                            <!-- 공지사항 번호 (고정됨) -->
                                                            <td>{{ lect_board_list|length |subtract:forloop.counter0}}</td>
                                                            <!-- 공지사항 제목-->
                                                            <td><a href={% url 'lect_board_detail' room_no=lect.lect_no board_no=board.lect_board_no %}>{{ board.lect_board_title }}</a></td>
                                                            <!-- 공지사항 작성자: 복수 강의자일 경우, 해당 게시글을 올린 강의자 이름을 불러올 것 -->
                                                            <td>{{ board.lect_board_writer.user_name }}</td>
                                                            <!-- 게시글 작성일 -->
                                                            <td>{{ board.lect_board_created | date:"Y-m-d"}}</td>
                                                        </tr>

                                                    {% endfor %}
                                                    </tbody>
                                                </table>
                                            {% else %}
                                                <p>강의가 없습니다.</p>
                                            {% endif %}

                                            </div>
                                        </div>
                                        <!-- 강의룸 내 과제 글을 담는 박스 -->
                                        <div class="content-box">
                                            <!-- 박스 제목 div -->
                                            <div class="content-header d-flex justify-content-between">
                                                <h3 class="title"><i class="fa fa-check-square-o m-r5"></i>과제</h3>
                                                <!-- 더보기 a태크 클릭 시, 강의룸 내 과제 페이지로 이동 -->
                                                {% if assignment_list %}
                                                    <!-- 더보기 a태크 클릭 시, 강의룸 내 강의리스트 페이지로 이동 -->
                                                    <a href="#">더보기</a>
                                                {% elif logined_user == lect.lect_chief %}
                                                    <a href="#">등록하기</a>
                                                {% endif %}
                                            </div>
                                            <div class="content-body">
                                            {% if assignment_list %}
                                                <!-- 과제 게시글 테이블 -->
                                                <table class="table">
                                                    <!-- 테이블 1행: 제목 -->
                                                    <thead>
                                                    <tr>
                                                        <th class="border-top-0" scope="col">번호</th>
                                                        <th class="border-top-0" style="width: 400px" scope="col">제목
                                                        </th>
                                                        <th class="border-top-0" scope="col">과제 마감일</th>
                                                        <th class="border-top-0 text-xl-center" scope="col">제출</th>
                                                    </tr>
                                                    </thead>
                                                    <!-- 테이블 2행 ~: 과제 페이지 내 최근 3개 게시글 불러옴 -->
                                                    <tbody>
                                                    {% for assignment in assignment_list %}
                                                        <tr>
                                                            <!-- 게시글 번호 (고정됨) -->
                                                            <td>{{ forloop.counter }}</td>
                                                            <!-- 게시글 제목: a태그 클릭하면, 해당 게시글로 이동 -->
                                                            <td><a href="#">assignment.title</a></td>
                                                            <!-- 과제 마감일 -->
                                                            <td>assignment.deadline</td>
                                                            <!-- 수강생: 과제 제출 여부 (제출/미제출) 보임 -->
                                                            <!-- 과제 제출 전이라면, 과제 안내 페이지로 넘어갈 수 있도록 처리필요 -->
                                                            <!-- 강의자: 과제를 제출한 사람수 보임 -->
                                                            <td class="text-xl-center text-red">미제출</td>
                                                        </tr>
                                                    {% endfor %}
                                                    </tbody>
                                                </table>
                                            {% else %}
                                                <p>과제가 없습니다.</p>
                                            {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--========================= 강의룸 메인 콘텐츠 끝 =========================-->
                        </div>
                    </div>
                </div>
            </div>
            <!--======================================= 본문 끝 ==========================================-->
            <!--==========================================================================================-->
        </div>
        <!-- 상단으로 한번에 올라가는 버튼 -->
        <button class="scroltop fa fa-chevron-up" style="display: none;"></button>
    </div>
{% endblock %}