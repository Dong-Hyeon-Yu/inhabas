{% extends "base.html" %}
{% load static %}
{% block content %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/ibas_contents.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/nav.css' %}">
    <script src="{% static 'js/ibas_centents.js' %}"></script>
    <script src="{% static 'js/nav.js' %}"></script>
    <link rel="stylesheet" type="text/css" href="{% static 'css/star-rating-svg.css' %}"/>
    <link
            rel="stylesheet"
            type="text/css"
            href="{% static 'plugins/editor/jquery-te-1.4.0.css' %}"
    />

    <link
            rel="stylesheet"
            type="text/css"
            href="{% static 'plugins/drop/imageuploadify.min.css' %}"
    />

    <!--제목을 감싸는 배경-->
    <div class="dlab-bnr-inr dlab-bnr-inr-sm overlay-black-middle"
         style=" background-image: url('{% static 'images/board_name_img.jpg' %}'); height: 74px; z-index: 0">
    </div>

    <!-- ===========================동아리 소개================================ -->

    <!-- 여기서 id는 네비게이션바를 위해 사용함. -->
    <section id="introduce">
        <!--introduce-contact-flex-container는 yejin.css에 정의되어 있음. -->
        <div
                class=" bg-img-fix most-visited content-inner introduce-contact-flex-container"
                style="background-image:url('{% static 'images/main-introduce.jpg' %}'); z-index: 0; display: flex; justify-content: center; align-items: center">
            <!-- 네비게이션바 색전환의 정상적 작동을 위해 스타일에서 margin을 0으로 설정함.  -->
            <div class="container" style="margin: 0">
                <!--introduce-for-del-margin 는 yejin.css에 정의되어 있음. -->
                <!-- 동아리 소개 밑 공간을 주기 위해 padding-bottom을 40px로 설정함.  -->
                <div class="introduce-for-del-margin text-center" style="padding-bottom: 40px">
                    <h2 class="box-title">동아리 소개</h2>
                    <div class="dlab-separator" style="background-color: #091069; z-index: 0"></div>
                    <p>인하대학교 빅데이터 탐구동아리 IBAS(Inha Bigdata Analyst Society)입니다. <br/>IBAS는 빅데이터에 관심이 있는 학생들이 모여 기초부터
                        하나씩 쌓아가기위해 만든 빅데이터 탐구동아리 입니다.</p>
                </div>
                <!-- ===========================동아리 소개 안 카드부분================================ -->
                <!-- !!!!!!!!!!!!!!!!!!!! 동아리 소개 정해지면 수정해야 함 !!!!!!!!!!!!!!!!!!! -->

                <!-- ===========================동아리 소개 안 왼쪽 카드================================ -->
                <!--introduce-contact-flex-container는 yejin.css에 정의되어 있음. -->
                <div class="introduce-flex-container">
                    <!--introduce-card는 yejin.css에 정의되어 있음. -->
                    <div class="item introduce-card">
                        <div class="blog-post dez-blog">
                            <!--introduce-card-pic는 yejin.css에 정의되어 있음. -->
                            <div class="dlab-post-media introduce-card-pic">
                                <img src="{% static 'images/introduce_card_left.png' %}"
                                     alt="현재 브라우저에서 지원하지 않는 형식입니다."/>
                            </div>
                            <div class="dlab-info" style="height: 229px;">
                                <div class="dlab-post-title ">
                                    <h5 class="post-title">Big Data Analysis</h5>
                                </div>
                                <div class="dlab-post-text">
                                    <p>통계적 분석도구를 통해 데이터가 어떤 의미를 갖는지, 한 변수와 다른 변수는 어떤 관계에 있는지를
                                        규명합니다. 의미있는 결과를 도출하고, 이를 실생활에 접목할 방법을 모색합니다.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ===========================동아리 소개 안 중앙 카드================================ -->
                    <!--introduce-card는 yejin.css에 정의되어 있음. -->
                    <div class="item introduce-card">
                        <div class="blog-post dez-blog">
                            <!--introduce-card-pic는 yejin.css에 정의되어 있음. -->
                            <div class="dlab-post-media introduce-card-pic">
                                <img src="{% static 'images/introduce_card_center_2.png' %}"
                                     alt="현재 브라우저에서 지원하지 않는 형식입니다."/>
                            </div>
                            <div class="dlab-info" style="height: 229px;">
                                <div class="dlab-post-title ">
                                    <h5 class="post-title">Big Data Visualization</h5>
                                </div>
                                <div class="dlab-post-text">
                                    <p> 텍스트로 되어 있는 여러 데이터들을 인간이 이해하기 쉬운 형태로 변환합니다. 데이터의 전체적인
                                        모습과 각각의 정량적인 척도를 시각적으로 가늠하게 합니다.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ===========================동아리 소개 안 오른쪽 카드================================ -->
                    <!--introduce-card는 yejin.css에 정의되어 있음. -->
                    <div class="item introduce-card">
                        <div class="blog-post dez-blog">
                            <!--introduce-card-pic는 yejin.css에 정의되어 있음. -->
                            <div class="dlab-post-media introduce-card-pic">
                                <img src="{% static 'images/introduce_card_right.png' %}"
                                     alt="현재 브라우저에서 지원하지 않는 형식입니다."/>
                            </div>
                            <div class="dlab-info" style="height: 229px;">
                                <div class="dlab-post-title ">
                                    <h5 class="post-title">Big Data Engineering</h5>
                                </div>
                                <div class="dlab-post-text">
                                    <p>빅데이터 알고리즘의 효율성을 고민하며, 개념으로 존재했던 빅데이터 알고리즘을 실제 프로그램으로
                                        구현하여 현실세계에 나타나게 합니다.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ===========================회장단 소개================================ -->
    <!-- section id는 네비게이션바를 위해 사용함. -->
    <section id="introduce_cm">
        <!--introduce-contact-flex-container는 yejin.css에 정의되어 있음. -->
        <!-- 동아리 연혁 추가 모달을 위해 z-index를 0으로 설정. -->
        <div
                class=" content-inner introduce-contact-flex-container"
                style=" z-index: 0; background-color: #f5f9ff;">
            <!-- 네비게이션바 색전환의 정상적 작동을 위해 스타일에서 margin을 0으로 설정함.  -->
            <div class="container" style="margin: 0">
                <!--introduce-for-del-margin는 yejin.css에 정의되어 있음. -->
                <!-- 회장단 소개 밑 공간을 주기 위해 스타일에서 padding-bottom을 40px으로 설정함.  -->
                <div class="introduce-for-del-margin text-center" style="padding-bottom: 40px">
                    <h2 class="box-title">회장단 소개</h2>
                    <div class="dlab-separator" style="z-index: 0; background-color: #091069"></div>
                    <p style="margin: 0;">IBAS를 이끄는 회장단입니다.</p>
                </div>
                <div style="z-index: 0">
                    <div id="owl-demo"
                         class="testimonial-one owl-loaded owl-theme owl-carousel owl-btn-center-lr owl-btn-3 owl-dots-primary-big">
                <!-- ===========================회장단 소개 시작 ================================ -->
                        {% for chief_crew in chief_crews %}
                            <div class="item">
                                <!--introduce-height_380는 yejin.css에 정의되어 있음. -->
                                <div class="client-box introduce-height_380">
                                    <div class="client-detail">
                                        <div class="client-img">
                                            <!-- 회장단 프로필사진 -->
                                            <img src="/media/{{ chief_crew.user_pic }}" width="100"
                                                 height="100" alt="">
                                        </div>
                                        <div class="client-info">
                                            <!-- 회장단 이름 -->
                                            <h5 class="client-name">{{ chief_crew.user_name }}</h5>
                                            <!-- 회장단 전공 -->
                                            <span>{{ chief_crew.user_role.role_name }}, {{ chief_crew.user_major.major_name }}</span>
                                        </div>
                                    </div>
                                    <div class="client-info-bx">
                                        <!-- 회장단 전화번호 -->
                                        <h5>{{ chief_crew.user_phone }}</h5>
                                        <!-- 회장단 이메일 -->
                                        <h5>{{ chief_crew.useremail_set.first.user_email }}</h5>
                                        {% for chief_crew_carrier in chief_crew.chiefcarrier_set.all %}
                                            <p>{{ chief_crew_carrier.carrier_content }}</p>
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- ===========================동아리 연혁================================ -->
    <!-- section id는 네비게이션바를 위해 사용함. -->
    <section id="history">
        <!--introduce-padding-bottom_0 introduce-contact-flex-container는 yejin.css에 정의되어 있음. -->
        <div class=" bg-img-fix most-visited content-inner pb-0 introduce-contact-flex-container"
             style="background-image:url('{% static 'images/main-introduce.jpg' %}'); z-index: 0">
            <div class="container" style="margin: 0">
                <!--introduce-for-del-margin는 yejin.css에 정의되어 있음. -->
                <div class="introduce-for-del-margin text-center" style="padding-bottom: 40px">
                    <h2 class="box-title">동아리 연혁</h2>
                    <div class="dlab-separator" style="z-index: 0; background-color: #091069"></div>
                    <p>IBAS는 이런 역사를 가지고 있습니다.</p>
                    {% if logined_user.user_role.role_no <= 3 %}
                        <div>
                            <!--introduce-color-btn는 yejin.css에 정의되어 있음. -->
                            <!--introduce_add()는 yejin.js에 정의되어 있음. 동아리 연혁 추가하기 위한 모달을 보여주는 함수임. -->
                            <p class="introduce-color-btn "
                               style="color: white"
                               onclick="introduce_add()">동아리 연혁 추가하기</p>
                        </div>
                    {% endif %}
                    <!-- ===================================모달부분======================================== -->
                    <!--introduce-modal-bg는 yejin.css에 정의되어 있음. -->
                    <div id="introduce-modal-bg" class="introduce-modal-bg" tabindex="-1">
                        <!--introduce-modal는 yejin.css에 정의되어 있음. -->
                        <div class="introduce-modal">
                            <div class="content-box">
                                <div class="content-header">
                                    <h3 class="title"><i class="la la-map-signs m-r5"
                                                         style="color: #091069; font-size: 16pt">
                                    </i>동아리 연혁 추가하기</h3>
                                </div>
                                <form action="{% url 'history_register' %}" method="post">
                                    {% csrf_token %}
                                    <div class="content-body">
                                        <ul class="icon-box-list">
                                            <!--요소 간 간격을 조절하기 위해서 그리드로 짜줌. 바로 밑 형제요소와 사이즈 다르니 주의 요망 -->
                                            <li style="width: 100%; display: grid; grid-template-columns: 50px 170px">
                                                <div class="icon-cell bg-gray">
                                                    <i class="la la-calendar" style="justify-content: center"></i>
                                                </div>

                                                <!--introduce-li-flex introduce-border_none는 yejin.css에 정의되어 있음. -->
                                                <div class="introduce-li-flex">
                                                    <input type="date" name="history_date"
                                                           class="introduce-border_none"/>
                                                </div>
                                            </li>
                                            <!--요소 간 간격을 조절하기 위해서 그리드로 짜줌. 바로 위 형제요소와 사이즈 다르니 주의 요망 -->
                                            <li style="width: 100%; display: grid; grid-template-columns:50px 307px">
                                                <div class="icon-cell bg-gray">
                                                    <i class="la la-pencil"></i>
                                                </div>

                                                <!--introduce-li-flex는 yejin.css에 정의되어 있음. -->
                                                <div class="introduce-li-flex">
                                                <textarea name="history_cont"
                                                          type="text"
                                                          class="form-control"
                                                          style="resize: none; font-size: 12pt"
                                                          placeholder="내용을 입력하세요."></textarea>
                                                </div>
                                            </li>
                                        </ul>

                                    </div>
                                    <div class="content-footer">
                                        <input type="submit" class="btn btn-primary" style="background-color: #091069"
                                               value="등록"/>
                                        <!-- introduce_close()는 yejin.js에 정의되어 있음. 동아리 연혁 추가 모달을 닫기 위한 함수임.  -->
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                                                onclick="introduce_close()">Close
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- ===========================동아리 연혁부분 박스================================ -->
                    <!--introduce-box-bg introduce-history-box introduce-color_black 는 yejin.css에 정의되어 있음. -->
                    <div class="icon-bx-wraper introduce-box-bg introduce-history-box
                    text-dark m-b10" style="z-index: 0; margin-left: 0">
                        <!-- introduce-history-grid introduce-overflow_auto는 yejin.css에 정의되어 있음. -->
                        {% for history in history_list %}
                            <form id="history-update-{{ history.history_no }}" action="{% url 'history_update' %}"
                                  method="post">
                                <input type="hidden" name="history_no" value="{{ history.history_no }}"/>
                                {% csrf_token %}

                                <div id="divGroup" class="introduce-history-grid introduce-overflow_auto ">
                                    <!-- introduce-text-align_center는 yejin.css에 정의되어 있음. -->

                                    <!-- ===========================여기서부터 introduce_update() introduce_del() 쓰임. ================================ -->
                                    <!-- =========================== 연혁 박스 안 내용 시작 ================================ -->
                                    <!-- 날짜 -->
                                    <div class="text-center">
                                        <!-- introduce-update-input-date introduce-margin-bottom_10는 yejin.css에 정의되어 있음. -->
                                        <!-- introduce_update()에서 disabled를 false로 만들어야 하므로 꼭 필요해여 -->
                                        <input id="date-{{ history.history_no }}" type="date"
                                               name="history_date"
                                               value="{{ history.history_date|date:'Y-m-d' }}"
                                               disabled="disabled"
                                               class="introduce-update-input-date m-b10"
                                               style="width: 170px">
                                    </div>
                                    <!-- 내용 -->
                                    <!-- introduce-history-box-flex 는 yejin.css에 정의되어 있음. -->
                                    <div id="history_txt" class="introduce-history-box-flex ">
                                        <!-- introduce-update-input-txt는 yejin.css에 정의되어 있음. -->
                                        <!-- introduce_update()에서 disabled를 false로 만들어야 하므로 꼭 필요해여 -->
                                        <input id="history-txt-{{ history.history_no }}"
                                               name="history_cont"
                                               value="{{ history.history_cont }}" disabled="disabled"
                                               class="introduce-update-input-txt">
                                    </div>
                                    <!-- introduce-align-items_start는 yejin.css에 정의되어 있음. -->
                                    <div class="introduce-contact-flex-container" style="justify-content: space-around">
                                        <!-- 수정버튼 -->
                                        <!-- introduce_update()는 yejin.js에 정의되어 있음. -->
                                        {% if logined_user.user_role.role_no <= 3 %}
                                            <div onclick="introduce_update({{ history.history_no }})"><input
                                                    id="btn-history-update-{{ history.history_no }}" type="submit"
                                                    hidden>
                                                <i class="fa fa-pencil" id="update-{{ history.history_no }}"></i>
                                            </div>
                                            <!-- 삭제버튼 -->
                                            <!-- introduce_update()는 yejin.js에 정의되어 있음. -->
                                            <div onclick="introduce_del({{ history.history_no }})">
                                                <input type="submit" hidden>
                                                <i class="fa fa-trash" id="delete"></i>
                                            </div>
                                        {% endif %}
                                    </div>
                                </div>
                            </form>
                            <form id="history-delete-{{ history.history_no }}" action="{% url 'history_delete' %}"
                                  method="post">
                                {% csrf_token %}
                                <input type="hidden" name="history_no" value="{{ history.history_no }}">
                            </form>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- ===========================Contact Us================================ -->
    <!-- section id는 네비게이션바를 위해 사용함. -->
    <section id="contact">
        <!-- introduce-contact-flex-container는 yejin.css에 정의되어 있음. -->
        <div
                class="content-inner introduce-contact-flex-container"
                style="background-color: #f5f9ff; z-index: 0">
            <div class="container" style="margin: 0">
                <!-- introduce-for-del-margin는 yejin.css에 정의되어 있음. -->
                <div class="introduce-for-del-margin text-center" style="padding-bottom: 40px">
                    <h2 class="box-title">Contact Us</h2>
                    <div class="dlab-separator" style="background-color: #091069; z-index: 0; "></div>
                    <!-- introduce-margin-bottom_5 introduce-font-size_15는 yejin.css에 정의되어 있음. -->
                    <p class="m-b5 introduce-font-size_15">
                        <i class="ti-email"></i>
                        {{ chief.useremail_set.first.user_email }}
                    </p>
                    <p class="introduce-font-size_15"><i class="ti-mobile"></i> {{ chief.user_phone }}</p>
                </div>

                <!-- introduce-contact-flex-container  introduce-google-map-size 는 yejin.css에 정의되어 있음. -->
                <div class="introduce-contact-flex-container"
                     style="justify-content: center; margin-bottom: 0; z-index: 0">
                    <iframe class=" introduce-google-map-size "
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3167.4531204275!2d126.65129931528445!3d37.45002207981986!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x357b79ab3057fc7f%3A0xe3e29f05aba35eb0!2z7J247ZWY64yA7ZWZ6rWQIOyaqe2YhOy6oO2NvOyKpA!5e0!3m2!1sko!2skr!4v1610804139555!5m2!1sko!2skr"
                            width="500" height="390" frameborder="0" style="border:0;"
                            allowfullscreen=""></iframe>
                </div>
            </div>
        </div>
    </section>


    <!-- ===========================네비게이션바================================ -->
    <!--introduce-contact-flex-container introduce-display_inline-block introduce-nav는 yejin.css에 정의되어 있음. -->
    <nav id="introduce-nav"
         class="sticky-top introduce-contact-flex-container introduce-display_inline-block introduce-nav"
         style="justify-content: start; z-index: 0;">
        <!--introduce-nav-bar는 yejin.css에 정의되어 있음. -->
        <div class="listing-filter-sidebar introduce-nav-bar">
            <!--introduce-margin-bottom_10는 yejin.css에 정의되어 있음. -->
            <h4 class="title m-b30 m-b10">IBAS</h4>
            <!-- 글자 누르면 해당하는 영역으로 이동함. id를 통해 찾아가는 것임.  -->
            <!--introduce-nav-txt는 yejin.css에 정의되어 있음. -->
            <!--clickMenu()는 yejin.js에 정의되어 있음. 클릭했을 때 글자 색 변하는 것. -->
            <a id="intro-a" href="#introduce" class="intro introduce-nav-txt menu-item introduce-change-nav"
               onclick="clickMenu(0)">
                <p class="m-b5">동아리 소개</p>
            </a>
            <a id="intro-cm-a" href="#introduce_cm" class="intro_cm introduce-nav-txt menu-item" onclick="clickMenu(1)">
                <p class="m-b5">회장단 소개</p>
            </a>
            <a id="his-a" href="#history" class="his introduce-nav-txt menu-item" onclick="clickMenu(2)">
                <p class="m-b5">동아리 연혁</p>
            </a>
            <a id="con-a" href="#contact" class="con introduce-nav-txt menu-item" onclick="clickMenu(3)">
                <p class="m-b5">Contact Us</p>
            </a>
        </div>
    </nav>

    <!-- ===========================네비게이션바 JS================================ -->
    <script type="text/javascript">
        // 동아리 소개, 회장단 소개, 동아리 연혁, contact us의 section과 그 자식요소의 첫번째를 선택하는 변수 선언
        let intro = document.getElementById("introduce");
        let intro_cm = document.getElementById("introduce_cm");
        let his = document.getElementById("history");
        let con = document.getElementById("contact");

        // 스크롤 할 때 이벤트
        window.addEventListener("scroll", qualifiedName => {
            // 스크롤 내렸을 때 위치를 screen으로 선언
            let screen = window.pageYOffset;

            // 회장단 소개의 위치가 window 크기 보다는 작거나 같고, 동아리 연혁의 위치가 window 크기 보다는 클 때
            // -100과 +100을 한 이유는 스크롤 위치 조정을 위해서임
            if ((intro_cm.offsetTop - 100 <= screen) && (his.offsetTop > screen + 100)) {
                // 콘솔에 introduce_cm을 출력하고
                console.log("introduce_cm");
                // 네비게이션바에서 intro-cm-a만 introduce-change-nav 클래스를 추가하고 나머지는 지운다. 글자 커지고, 색 바뀌는 것 관련.
                document.querySelector("#intro-cm-a").classList.add('introduce-change-nav');
                document.querySelector("#his-a").classList.remove('introduce-change-nav');
                document.querySelector("#con-a").classList.remove('introduce-change-nav');
                document.querySelector("#intro-a").classList.remove('introduce-change-nav');
            }
                // 동아리 연혁의 위치가 window 크기 보다는 작거나 같고, contact us의 위치가 window 크기 보다는 클 때
            // -200과 +200을 한 이유는 스크롤 위치 조정을 위해서임
            else if ((his.offsetTop - 200 <= screen) && (con.offsetTop > screen + 200)) {
                // 콘솔에 history를 출력하고
                console.log("history");
                // 네비게이션바에서 his-a만 introduce-change-nav 클래스를 추가하고 나머지는 지운다. 글자 커지고, 색 바뀌는 것 관련.
                document.querySelector("#his-a").classList.add('introduce-change-nav');
                document.querySelector("#intro-cm-a").classList.remove('introduce-change-nav');
                document.querySelector("#con-a").classList.remove('introduce-change-nav');
                document.querySelector("#intro-a").classList.remove('introduce-change-nav');

                // contact us의 위치가 window 크기 보다는 작거나 같을 때
                // -300과 +300을 한 이유는 스크롤 위치 조정을 위해서임
            } else if (con.offsetTop - 300 <= screen + 300) {
                // 콘솔에 contact을 출력하고
                console.log("contact");
                // 네비게이션바에서 con-a만 introduce-change-nav 클래스를 추가하고 나머지는 지운다. 글자 커지고, 색 바뀌는 것 관련.
                document.querySelector("#con-a").classList.add('introduce-change-nav');
                document.querySelector("#his-a").classList.remove('introduce-change-nav');
                document.querySelector("#intro-cm-a").classList.remove('introduce-change-nav');
                document.querySelector("#intro-a").classList.remove('introduce-change-nav');

            }
            // 나머지 경우, 동아리 소개의 경우
            else {
                // 콘솔에 introduce을 출력하고
                console.log("introduce");
                // 네비게이션바에서 intro-a만 introduce-change-nav 클래스를 추가하고 나머지는 지운다. 글자 커지고, 색 바뀌는 것 관련.
                document.querySelector("#intro-a").classList.add('introduce-change-nav');
                document.querySelector("#his-a").classList.remove('introduce-change-nav');
                document.querySelector("#con-a").classList.remove('introduce-change-nav');
                document.querySelector("#intro-cm-a").classList.remove('introduce-change-nav');

            }
        })

    </script>
{% endblock %}

