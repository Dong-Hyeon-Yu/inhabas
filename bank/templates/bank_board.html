{% extends "base.html" %}
{% load static %}
{% block content %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/bank_yejin.css' %}">
    <script src="{% static 'js/bank_yejin.js' %}"></script>
    <!----------상단 제목부분----------->
    <!--제목을 감싸는 배경-->
    <div class="dlab-bnr-inr dlab-bnr-inr-sm overlay-black-middle"
         style=" background-image: url('{% static 'images/board_name_img.jpg' %}'); height: 350px">
        <div class="container clearfix">
            <div class="dlab-bnr-inr-entry">
                <!--제목-->
                <h1 class="text-white introduce-letter-spacing_5">회계 내역</h1>
                <!--부제목-->
                <p class="introduce-margin-top_20">회계 내역에 대한 게시판입니다.</p>
            </div>
        </div>

    </div>

    <!-- Content 부분 시작 -->
    <div class="page-content bg-white">
        <!-- inner page banner END -->
        <!-- Contact area -->
        <div class="content-block">
            <div class="section-full content-inner bg-white">
                <div class="container">
                    <div class="listing-filter m-b40">
                        <!-- bank-flex는 bank_yejin.css에 정의되어 있음.  -->
                        <div class="bank-flex">
                            <div class="mr-auto">
                                <div>
                                    <!-- bank-margin-bottom_0는 bank_yejin.css에 정의되어 있음.  -->
                                    <!-- bank-year는 bank_yejin.js에 사용됨. bank_select 부분과 관련 -->
                                    <h3 id="bank-year" class="title bank-margin-bottom_0">2021</h3>
                                </div>
                            </div>
                            <div>
                                <ul class="filter m-b0">
                                    <li>
                                        <!-- bank-select는 bank_yejin.js에 사용됨. bank_select 부분과 관련 -->
                                        <!-- bank_select()는 bank_yejin.css에 정의되어 있음.  -->
                                        <select id="bank-select" onchange="bank_select()">
                                            <option>2021</option>
                                            <option>2022</option>
                                            <option>2023</option>
                                            <option>2024</option>
                                            <option>2025</option>
                                            <option>2026</option>
                                            <option>2027</option>
                                            <option>2028</option>
                                            <option>2029</option>
                                            <option>2030</option>
                                        </select>
                                    </li>
                                </ul>
                            </div>

                        </div>
                    </div>

                    <!-- 게시글을 담는 테이블 -->
                    <table class="table">
                        <!-- 테이블의 제목(1행) -->
                        <thead>
                        <!-- bank-tr-head는 bank_yejin.js에 사용됨. bank_select 부분과 관련 -->
                        <tr id="bank-tr-head" style="text-align: center">
                            <th scope="col" style="width: 175px;">날짜</th>
                            <th scope="col" style="width: 400px">내용</th>
                            <th scope="col" style="width: 123px;">수입액</th>
                            <th scope="col" style="width: 123px;">지출액</th>
                            <th scope="col" style="width: 124px;">누적합계</th>
                            <th scope="col" style="width: 86px;">증빙자료</th>
                            <th scope="col" style="width: 54px;">수정</th>
                            <th scope="col" style="width: 55px;">삭제</th>
                        </tr>
                        </thead>
                        <!-- 끌고오는 게시글 파트 -->
                        <tbody>

                        <!-- ========================== 게시글 (여기서 부터 반복) ============================= -->
                        <!-- bank-tr-1는 bank_yejin.js에 사용됨. bank_select 부분과 관련 -->
                        <!-- bank-text-align_center는 bank_yejin.css에 정의됨. -->

                        {% for bank in bank_list %}
                            <tr id="bank-tr-1" class="bank-text-align_center">

                                <form id="bank-update-{{ bank.bank_no }}" action="{% url 'bank_update' %}"
                                      method="POST">
                                    <input type="hidden" name="bank_no" value="{{ bank.bank_no }}">
                                    {% csrf_token %}

                                    <!-- 날짜 -->
                                    <td scope="row" style="width: 175px;">
                                        <!-- bank-date-1는 bank_yejin.js에 사용됨. bank_select, bank_update 부분과 관련 -->
                                        <!-- bank-input-con는 bank_yejin.css에 정의됨. -->
                                        <input id="bank-date-{{ bank.bank_no }}" class="bank-input-con" type="date"
                                               value="{{ bank.bank_created|date:'Y-m-d' }}"
                                               name="bank_created"
                                               style="width: 150px;" disabled="disabled">
                                    </td>

                                    <!-- 내용 -->
                                    <!-- bank-text-align_start는 bank_yejin.css에 정의됨. -->
                                    <td class="bank-text-align_start" style="width: 400px;">
                                        <!-- bank-txt-1는 bank_yejin.js에 사용됨. bank_update 부분과 관련 -->
                                        <!-- bank-input-con는 bank_yejin.css에 정의됨. -->
                                        <input id="bank-txt-{{ bank.bank_no }}" class="bank-input-con" type="text"
                                               value="{{ bank.bank_title }}" name="bank_title"
                                               disabled="disabled">
                                    </td>

                                    <!-- 수입액 -->
                                    <td style="width: 123px;">
                                        <!-- bank-earn-1는 bank_yejin.js에 사용됨. bank_update 부분과 관련 -->
                                        <!-- bank-input-con는 bank_yejin.css에 정의됨. -->
                                        <input id="bank-earn-{{ bank.bank_no }}" class="bank-input-con" type="text"
                                               value="{{ bank.bank_plus }}" name="bank_plus"
                                               disabled="disabled">
                                    </td>

                                    <!-- 지출액 -->
                                    <td style="width: 123px;">
                                        <!-- bank-spend-1는 bank_yejin.js에 사용됨. bank_update 부분과 관련 -->
                                        <!-- bank-input-con는 bank_yejin.css에 정의됨. -->
                                        <input id="bank-spend-{{ bank.bank_no }}" class="bank-input-con" type="text"
                                               value="{{ bank.bank_minus }}" name="bank_minus"
                                               disabled="disabled">
                                    </td>

                                    <!-- 누적합계 -->
                                    <td style="width: 124px;">
                                        <!-- bank-money-1는 bank_yejin.js에 사용됨. bank_update 부분과 관련 -->
                                        <!-- bank-input-con는 bank_yejin.css에 정의됨. -->
                                        <input id="bank-money-{{ bank.bank_no }}" name="bank_sum" class="bank-input-con"
                                               type="text" value="5,000,000"
                                               disabled="disabled">
                                    </td>

                                    <!-- 증빙자료 버튼 -->
                                    <td style="width: 86px;">
                                        <!-- 누르면 증빙자료모달 보이게 함 -->
                                        <a data-toggle="modal" data-target="#bank-modal-bg" href="javascript:void(0);"
                                           class="site-button-link black bank-flex">
                                            <i class="fa fa-file-text-o"></i>
                                        </a>
                                    </td>

                                    <!-- 수정 -->
                                    <!-- bank_update는 bank_yejin.js에 정의됨. -->
                                    <td onclick="bank_update({{ bank.bank_no }})"
                                        style="width: 55px; padding-left: 20px;">
                                        <!-- bank-update는 bank_yejin.js에 사용됨. bank_update 부분과 관련 -->
                                        <input id="btn-bank-update-{{ bank.bank_no }}" type="submit"
                                               hidden>
                                        <i class="fa fa-pencil" id="update-{{ bank.bank_no }}"></i>
                                    </td>
                                </form>

                                <!-- 삭제 -->
                                <form id="bank-delete-{{ bank.bank_no }}" action="{% url 'bank_delete' %}"
                                      method="POST">
                                    {% csrf_token %}
                                    <td onclick="bank_del({{ bank.bank_no }})" style="padding-left: 20px;">
                                        <i class="fa fa-trash"
                                           style="font-size: 18px; justify-content: flex-start;"></i>
                                    </td>
                                    <input type="hidden" name="bank_no" value="{{ bank.bank_no }}">
                                </form>

                            </tr>
                            <!-- ========================== 게시글 끝 (여기까지) ============================= -->

                            </tbody>
                            <!--=======================증빙자료 모달============================-->
                            <!-- bank-modal-bg는 증빙자료 버튼과 연결 하기 위함임  -->
                            <div class="modal fade modal-bx-info" id="bank-modal-bg" tabindex="-1" role="dialog"
                                 aria-labelledby="FavoriteModalLongTitle" aria-hidden="true">
                                <div class="modal-dialog " role="document">
                                    <div class="modal-content">
                                        <!-- 모달 헤더 -->
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="ReportReviewsModalLongTitle">증빙자료</h5>
                                            <!-- 닫는 버튼 -->
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true"><i class="la la-close"></i></span>
                                            </button>
                                        </div>

                                        <div class="content-body">
                                            <div style="width: 100%; display: grid; grid-template-columns: 50px 170px; margin-bottom: 10px">
                                                <!--요소 간 간격을 조절하기 위해서 그리드로 짜줌. 바로 밑 형제요소와 사이즈 다르니 주의 요망 -->

                                                <div>
                                                    <i class="la la-calendar-check-o"
                                                       style="justify-content: center; font-size: 25px"></i>
                                                </div>

                                                <div>
                                                    {{ bank.bank_created|date:'Y-m-d' }}
                                                </div>

                                            </div>
                                            <!--요소 간 간격을 조절하기 위해서 그리드로 짜줌. 바로 위 형제요소와 사이즈 다르니 주의 요망 -->
                                            <div style="width: 100%; display: grid; grid-template-columns:50px 300px; ">

                                                <div>
                                                    <i class="la la-pencil"
                                                       style="justify-content: center; font-size: 25px"></i>
                                                </div>

                                                <!--introduce-li-flex는 yejin.css에 정의되어 있음. -->
                                                <div class="introduce-li-flex">
                                                    {{ bank.bank_title }}
                                                </div>

                                            </div>
                                            <!-- 영수증 이미지 -->
                                            <div class="bank-flex">
                                                {{ bank.bank_no }}
                                                <img src="/media/{{ bank.bank_file.bank_file_path }}">
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>

                        {% endfor %}
                    </table>

                    <!-- 회계내역 추가 버튼  -->
                    <!-- bank-btn-add-divr는 bank_yejin.css에 정의됨. -->
                    <div class="bank-btn-add-div">
                        <div>
                            <!-- 회계내역 추가 버튼 누르면 회계내역 추가 모달이 나옴.  -->
                            <a data-toggle="modal" data-target="#bank-add-modal" href="javascript:void(0);"
                               class="site-button-link black">
                                <i class="fa fa-plus" style="color: #787878; font-size: 20px"></i>
                            </a>
                        </div>
                    </div>


                    <!--=========================회계내역 추가 모달==========================-->
                    <!-- bank-add-modal는 회계내역 추가 버튼과 연결 하기 위함임  -->
                    <div class="modal fade modal-bx-info" id="bank-add-modal" tabindex="-1" role="dialog"
                         aria-labelledby="FavoriteModalLongTitle" aria-hidden="true">
                        <div class="modal-dialog " role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="ReportReviewsModalLongTitle">회계 내역 추가</h5>
                                    <!-- 닫힘 버튼 -->
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true"><i class="la la-close"></i></span>
                                    </button>
                                </div>

                                <div class="content-body">

                                    {# ################## 등록 란  #############  #}
                                    <form class="dlab-form" action="{% url 'bank_register' %}" method="POST">
                                        {% csrf_token %}
                                        <input type="hidden" name="bank_apply" value="1">
                                        <!-- 날짜 -->
                                        <div class="form-group">
                                            <input required="" class="form-control" type="date" name="bank_created"/>
                                        </div>

                                        <!-- 내용 -->
                                        <div class="form-group">
                                            <input required="" class="form-control " name="bank_title" placeholder="내용을 입력하세요"
                                                   type="text"/>
                                        </div>

                                        <!-- 수입액 -->
                                        <div class="form-group">
                                            <input required="" class="form-control " name="bank_plus" placeholder="수입액을 입력하세요"
                                                   type="text"/>
                                        </div>

                                        <!-- 지출액 -->
                                        <div class="form-group">
                                            <input required="" class="form-control " name="bank_minus" placeholder="지출액을 입력하세요"
                                                   type="text"/>
                                        </div>

                                        <!-- 첨부버튼 -->
                                        <div class="form-group">
                                            <div class="form-group">
                                                <label style="font-size: 13px; font-weight: 100">증빙자료 첨부</label>
                                                <input type="file" name="bank_file"
                                                       accept="image/*"
                                                       multiple>
                                            </div>
                                        </div>

                                        <!-- 제출버튼 -->
                                        <div class="form-group">
                                            <button class="site-button btn-block button-md" type="submit">제출</button>
                                        </div>
                                    </form>

                                </div>
                            </div>
                        </div>
                    </div>


                    <!--========== 페이지네이션 시작 ===========-->
                    <!-- 1페이지에 15개 게시글 끌고오고, 게시글이 그보다 적으면, 페이지네이션 안보이게 처리 -->
                    <div class="pagination-bx clearfix text-center">
                        <ul class="pagination">
                            <li class="previous"><a href="javascript:void(0)"><i
                                    class="fa fa-arrow-left"></i></a></li>
                            <li><a href="javascript:void(0)">1</a></li>
                            <li><a href="javascript:void(0)">2</a></li>
                            <li><a href="javascript:void(0)">...</a></li>
                            <li class="active"><a href="javascript:void(0)">7</a></li>
                            <li class="next"><a href="javascript:void(0)"><i class="fa fa-arrow-right"></i></a>
                            </li>
                        </ul>
                    </div>
                    <!--========== 페이지네이션 끝 ===========-->
                </div>
            </div>
        </div>
        <!-- Contact area END -->
    </div>
    <!-- Content END-->

{% endblock %}